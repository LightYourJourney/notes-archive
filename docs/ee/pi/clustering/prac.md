# 动手实验：模式识别

## 实验目的

1. 了解 1-Wire 单总线基本原理。
2. 了解温度传感器 DS18B20 的基本使用方式。
3. 掌握树莓派 1-Wire 总线接口的编程方式和使用方法。
4. 使用 K 均值聚类算法对数据进行分类。

## 读取温度传感器的值

1.  在终端下通过 cat 命令读出当前的温度值。
2. 使用 python 代码获取当前温度值并显示到屏幕上。

在使用 python 代码读取 DS18B20 的温度时，不能假定相关的设备文件名已知，即为了更好的可移植性，不能将 DS18B20 的序列号认为是常量。正确的方法是使用 glob 库，利用通配符查找到对应的设备文 件，然后再打开文件获取温度数据，这样可以保证程序在不同的开发版上都可以正常工作。

## 聚类算法实现

假定某共用办公室有两个人使用，他们使用办公室的时候都会用空调遥控器设置房间的温度。但空调 遥控器显示面板坏掉了，只能通过加减温度的方式盲调整。已知他们习惯的温度不同，办公室的温度计有 记录功能，每天记录 12 小时的温度，每 30 分钟记录一次，根据一个月所记录的数据，通过聚类算法，算出 这两个人的喜好温度，并估算他们各使用办公室多少时间。

可以认为这两个人使用办公室的时候室内温度是不同方差和不同均值的正态分布随机数，采用 randn 函数生成模拟数据，并用 matplotlib 画出数据的直方图。

使用 K 均值聚类算法将模拟数据分成两个簇，解答前面的问题。使用温度传感器读入温度，根据温度值，判断是谁在使用办公室。

## 二维数据的聚类

使用随机算法生成二维的模拟数据，实现聚类算法。考虑下面两种情况：

- 模拟数据围绕两个中心点正态分布，方差相同
- 模拟数据采用如下代码生成，分布如图 3.4 所示

```python linenums="1"
import matplotlib.pyplot as plt
import numpy as np

r1 = 2
r2 = 4
p1 = []
p2 = []

for i in range (10000):
    x = np.random.rand() * r2 * 2 - r2;
    y = np.random.rand() * r2 * 2 - r2;
    if abs (x * x + y * y - r1) < 0.5:
        p1.append([x, y])
    if abs (x * x + y * y - r2) < 0.5:
        p2.append([x, y])![ref3]

plt.scatter(np.array(p1)[:,0], np.array(p1)[:,1], c='r', s=3)
plt.scatter(np.array(p2)[:,0], np.array(p2)[:,1], c='b', s=3)
plt.show()
```

<figure markdown="span">
  ![alt text](../../../assets/images/ee/pi/.png){ width="300" }
  <figcaption>图 3.4: 环状数据</figcaption>
</figure>